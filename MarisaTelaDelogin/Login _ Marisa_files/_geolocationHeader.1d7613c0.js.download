$(document).ready(function(){let o=new Date,i=$("#js-cookie-domain").val();o.setDate(o.getDate()-5);const d=window.matchMedia("only screen and (max-width: 760px)").matches;if(!$(".js-geolocation-offers-next-you").length||(a=getCookie("search_geo"))&&"true"===a&&$(".js-geolocation-offers-next-you").prop("checked",!0),$(".js-geolocation-selected-address").length){var a=getCookie("search_geo_address"),e=getCookie("search_geo_address_bar");if(a){a=decodeURIComponent(a),e=decodeURIComponent(e),$(".js-geolocation-load-selected-address").addClass("hidden"),d?$(".js-geolocation-selected-address").html('<span class="fs-12 c-13">'+e+"</span>"):$(".js-geolocation-selected-address").html('<span class="c-07">'+e+"</span>"),$(".js-geolocation-selected-address").removeClass("hidden");e=getCookie("search_geo_type");if("location"==e&&($(".js-geolocation-my-location").addClass("hidden"),$("#js-geo-mylocation-results-container").removeClass("hide"),$(".js-geo-my-location-address").html(a),$(".js-geolocation-confirm-div").addClass("hidden"),$(".js-geolocation-actions-div").removeClass("hidden")),"zip"==e){$(".js-geolocation-zip").addClass("hidden"),$(".js-geolocation-zip-actions").removeClass("hidden"),$(".js-geolocation-zip-address").html(a);e=getCookie("search_geo_zip");let o=decodeURIComponent(e);o=[o.slice(0,5),"-",o.slice(5)].join(""),$(".js-geolocation-zip-text").html(o)}}else{$(".js-geolocation-load-selected-address").addClass("hidden"),$(".js-geolocation-selected-address").removeClass("hidden");a=$("body").attr("data-page-uid");"homepage"!=a&&"productGrid"!=a&&"page_busca_chaordic"!=a||($("#js-geolocation-toast").addClass("show"),setTimeout(function(){$("#js-geolocation-toast").removeClass("show")},5e3)),"productDetails"==a&&($("#js-geolocation-toast").addClass("show"),"true"==$("#js-mylocation-enabled").val()?$(".js-geolocation-toast-text").text("Informe sua localização e confira a previsão de entrega"):$(".js-geolocation-toast-text").text("Informe seu CEP e confira a previsão de entrega"),setTimeout(function(){$("#js-geolocation-toast").removeClass("show")},5e3))}}function s(){$(".js-geolocation-my-location").removeClass("hidden"),$("#js-geo-mylocation-results-container").addClass("hide"),$(".js-geo-my-location-address").html(""),$(".js-geolocation-confirm-div").removeClass("hidden"),$(".js-geolocation-actions-div").addClass("hidden"),$(".js-geolocation-zip-text").html(""),$(".js-geolocation-zip-address").html(""),$(".js-geolocation-zip").removeClass("hidden"),$(".js-geolocation-zip-actions").addClass("hidden"),document.cookie="search_geo=;expires="+o+";domain="+i+";path=/",document.cookie="search_geo_lat=;expires="+o+";domain="+i+";path=/",document.cookie="search_geo_long=;expires="+o+";domain="+i+";path=/",document.cookie="search_geo_type=;expires="+o+";domain="+i+";path=/",document.cookie="search_geo_type=;expires="+o+";domain="+i+";path=/",document.cookie="search_geo_stores=;expires="+o+";domain="+i+";path=/",document.cookie="search_geo_zip=;expires="+o+";domain="+i+";path=/",document.cookie="search_geo_address=;expires="+o+";domain="+i+";path=/",document.cookie="search_geo_address_bar=;expires="+o+";domain="+i+";path=/",document.cookie="search_geo_stores_lastupdate=;expires="+o+";domain="+i+";path=/",$(".js-geolocation-selected-address").html('<span class="c-01">Informe seu </span><span class="c-08"> CEP</span><span class="c-01"> ou</span><span class="c-08"> localização</span>'),$(".js-geolocation-offers-next-you").prop("checked",!1),$("#modal-geolocation-header").modal("hide"),"productDetails"==$("body").attr("data-page-uid")&&$(".js-change-cep-delivery").click(),c()}function t(){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(o){var a=o.coords.latitude,o=o.coords.longitude;$.get("/geoPos?lat="+a+"&lon="+o,{}).done(function(o){$(".js-geolocation-my-location").addClass("hidden"),$("#js-geo-mylocation-results-container").removeClass("hide");var a=o.address;$(".js-geo-my-location-address").html(a),$(".js-geo-my-location-address").attr("data-lat",o.latitude),$(".js-geo-my-location-address").attr("data-long",o.longitude),$(".js-geo-my-location-address").attr("data-zip",o.postalCode),$(".js-geo-my-location-address").attr("data-stores",o.pointOfServices),$(".js-geo-my-location-address").attr("data-address",o.mylocation),$(".js-geo-my-location-address").attr("data-geo-bar",o.addressBar),$(".js-geolocation-confirm-location").click()}).fail(function(o){$(".js-geolocation-error-div").removeClass("hidden"),Marisa.components["page:tools"].loaderMaster(!1)})},function(o){o.code==o.PERMISSION_DENIED&&($(".js-geolocation-error-div").removeClass("hidden"),$(".js-geolocation-error-text").html("Permissão de geolocalização negada, habilite em seu navegador para busca da localização."),Marisa.components["page:tools"].loaderMaster(!1))}):($(".js-geolocation-error-div").removeClass("hidden"),$(".js-geolocation-error-text").html("Parece que o recurso de geolocalização, necessário para essa funcionalidade, não está habilitado em seu navegador. Por favor use um navegador que tenha suporte a geolocalização.")),$("#modal-geolocation-header").modal("hide")}function n(){$("#modal-geolocation-header").modal("hide"),$("#modal-geolocation-zip").modal()}function c(){"page_busca_chaordic"==$("body").attr("data-page-uid")?"function"==typeof window.updateSearch&&window.updateSearch&&window.updateSearch():window.location.reload()}$(".js-geolocation-close-toast").on("click",function(o){$("#js-geolocation-toast").removeClass("show")}),$(".js-geolocation-toast-text").on("click",function(o){$("#modal-geolocation-header").modal()}),$(".js-geolocation-offers-next-you").on("click",function(o){var a=getCookie("search_geo");a?"true"===a?($(".js-geolocation-offers-next-you").prop("checked",!0),$("#modal-geolocation-toggle-disabled").modal()):($(".js-geolocation-offers-next-you").prop("checked",!0),document.cookie="search_geo=true;domain="+i+";path=/",c()):($(".js-geolocation-offers-next-you").prop("checked",!1),$("#modal-geolocation-header").modal())}),$(".js-geolocation-toggle-modal-close").on("click",function(o){$(".js-geolocation-offers-next-you").prop("checked",!1),document.cookie="search_geo=false;domain="+i+";path=/",$("#modal-geolocation-toggle-disabled").modal("hide"),c()}),$(".js-geolocation-remove").on("click",function(o){var a;"productDetails"==$("body").attr("data-page-uid")?(a=getCookie("search_geo"))&&("true"===a?($("#modal-geolocation-header").modal("hide"),$("#modal-geolocation-pdp-alert").modal(),$(".js-geolocation-pdp-alert-text").html('<span class="c-01">Você está </span><span class="c-08">removendo</span><span class="c-01"> seu </span><span class="c-08">CEP</span><span class="c-01"> ou </span><span class="c-08">Localização</span><span class="c-01">. Esta ação desabilitará o filtro de "</span><span class="c-08">Ofertas próximas à você</span><span class="c-01">”.</span>'),$(".js-geolocation-pdp-alert-action").attr("data-action","remove-geolocation")):s()):s()}),$(".js-geolocation-change-location").on("click",function(o){var a;"productDetails"==$("body").attr("data-page-uid")?(a=getCookie("search_geo"))&&("true"===a?($("#modal-geolocation-header").modal("hide"),$("#modal-geolocation-pdp-alert").modal(),$(".js-geolocation-pdp-alert-text").html('<span class="c-01">Você está </span><span class="c-08">alterando</span><span class="c-01"> seu </span><span class="c-08">CEP</span><span class="c-01"> ou </span><span class="c-08">Localização</span><span class="c-01">. Esta ação irá alterar o resultado do filtro de "</span><span class="c-08">Ofertas próximas à você</span><span class="c-01">”.</span>'),$(".js-geolocation-pdp-alert-action").attr("data-action","update-geolocation")):t()):t()}),$(".js-geolocation-confirm-location").on("click",function(o){var a=$(".js-geo-my-location-address").text(),e=$(".js-geo-my-location-address").attr("data-geo-bar"),a=(document.cookie="search_geo_address="+encodeURI(a)+";domain="+i+";path=/",document.cookie="search_geo_address_bar="+encodeURI(e)+";domain="+i+";path=/",d?$(".js-geolocation-selected-address").html('<span class="fs-12 c-13">'+e+"</span>"):$(".js-geolocation-selected-address").html('<span class="c-07">'+e+"</span>"),$("#modal-geolocation-header").modal("hide"),$(".js-geolocation-confirm-div").addClass("hidden"),$(".js-geolocation-actions-div").removeClass("hidden"),$(".js-geolocation-offers-next-you").prop("checked",!0),$(".js-geo-my-location-address").attr("data-lat")),e=$(".js-geo-my-location-address").attr("data-long"),s=$(".js-geo-my-location-address").attr("data-zip"),t=$(".js-geo-my-location-address").attr("data-stores"),n=$(".js-geo-my-location-address").attr("data-geo-bar");document.cookie="search_geo=true;domain="+i+";path=/",document.cookie="search_geo_lat="+a+";domain="+i+";path=/",document.cookie="search_geo_long="+e+";domain="+i+";path=/",document.cookie="search_geo_type=location;domain="+i+";path=/",document.cookie="search_geo_zip="+encodeURI(s)+";domain="+i+";path=/",document.cookie="search_geo_stores="+t+";domain="+i+";path=/",document.cookie="search_geo_address_bar="+encodeURI(n)+";domain="+i+";path=/",$(".js-geolocation-zip-text").html(""),$(".js-geolocation-zip-address").html(""),$(".js-geolocation-zip").removeClass("hidden"),$(".js-geolocation-zip-actions").addClass("hidden"),c()}),$(".js-geolocation-my-location").on("click",function(o){Marisa.components["page:tools"].loaderMaster(!0),$(".js-geolocation-error-div").addClass("hidden"),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(o){var a=o.coords.latitude,o=o.coords.longitude;$.get("/geoPos?lat="+a+"&lon="+o,{}).done(function(o){var a,e;null==o.addressBar?$(".js-geolocation-error-div").removeClass("hidden"):($(".js-geolocation-error-div").addClass("hidden"),$(".js-geolocation-my-location").addClass("hidden"),$("#js-geo-mylocation-results-container").removeClass("hide"),a=o.address,e=o.addressBar,$(".js-geo-my-location-address").html(a),$(".js-geo-my-location-address").attr("data-lat",o.latitude),$(".js-geo-my-location-address").attr("data-long",o.longitude),$(".js-geo-my-location-address").attr("data-zip",o.postalCode),$(".js-geo-my-location-address").attr("data-stores",o.pointOfServices),$(".js-geo-my-location-address").attr("data-address",a),$(".js-geo-my-location-address").attr("data-geo-bar",e)),Marisa.components["page:tools"].loaderMaster(!1)}).fail(function(o){$(".js-geolocation-error-div").removeClass("hidden"),Marisa.components["page:tools"].loaderMaster(!1)})},function(o){o.code==o.PERMISSION_DENIED&&($(".js-geolocation-error-div").removeClass("hidden"),$(".js-geolocation-error-text").html("Permissão de geolocalização negada, habilite em seu navegador para busca da localização."),Marisa.components["page:tools"].loaderMaster(!1))}):($(".js-geolocation-error-div").removeClass("hidden"),$(".js-geolocation-error-text").html("Parece que o recurso de geolocalização, necessário para essa funcionalidade, não está habilitado em seu navegador. Por favor use um navegador que tenha suporte a geolocalização."))}),$(".js-geolocation-info").on("click",function(o){$("#modal-geolocation-header").modal("hide"),$("#modal-geolocation-info").modal()}),$(".js-geolocation-infomodal-back").on("click",function(o){$("#modal-geolocation-header").modal(),$("#modal-geolocation-info").modal("hide"),$("#modal-geolocation-zip").modal("hide")}),$(".js-geolocation-zip").on("click",function(o){$("#modal-geolocation-header").modal("hide"),$("#modal-geolocation-zip").modal(),$(".js-geolocazion-zip-error").addClass("hidden"),$(".js-geolocazion-zip-findzip").removeClass("hidden")}),$(".js-geolocation-zipmodal-back").on("click",function(o){$("#modal-geolocation-header").modal(),$("#modal-geolocation-zip").modal("hide")}),$(".js-geolocation-zip-ok").on("click",function(o){let a=$(".js-geolocation-zip-input").val();a.length<9?($(".js-geolocazion-zip-error").removeClass("hidden"),$(".js-geolocazion-zip-findzip").addClass("hidden")):($(".js-geolocazion-zip-error").addClass("hidden"),$(".js-geolocazion-zip-findzip").removeClass("hidden"),zipformatted=a.replace("-",""),$.get("/geoPos/"+zipformatted,{}).done(function(o){document.cookie="search_geo_zip="+encodeURI(o.postalCode)+";domain="+i+";path=/";var a=o.address,e=o.addressBar;document.cookie="search_geo_address="+encodeURI(a)+";domain="+i+";path=/",d?$(".js-geolocation-selected-address").html('<span class="fs-12 c-13">'+e+"</span>"):$(".js-geolocation-selected-address").html('<span class="c-07">'+e+"</span>"),$("#modal-geolocation-zip").modal("hide"),document.cookie="search_geo=true;domain="+i+";path=/",document.cookie="search_geo_type=zip;domain="+i+";path=/",document.cookie="search_geo_lat="+o.latitude+";domain="+i+";path=/",document.cookie="search_geo_long="+o.longitude+";domain="+i+";path=/",document.cookie="search_geo_stores="+o.pointOfServices+";domain="+i+";path=/",document.cookie="search_geo_address_bar="+encodeURI(e)+";domain="+i+";path=/";let s=o.postalCode;s=[s.slice(0,5),"-",s.slice(5)].join(""),$(".js-geolocation-zip-text").html(s),$(".js-geolocation-zip-address").html(a),$(".js-geolocation-zip").addClass("hidden"),$(".js-geolocation-zip-actions").removeClass("hidden"),$(".js-geolocation-zip-input").val(""),$(".js-geolocation-offers-next-you").prop("checked",!0),$(".js-geolocation-my-location").removeClass("hidden"),$("#js-geo-mylocation-results-container").addClass("hide"),$(".js-geo-my-location-address").html(""),$(".js-geolocation-confirm-div").removeClass("hidden"),$(".js-geolocation-actions-div").addClass("hidden"),$(".js-geolocation-zip-address").removeClass("hide"),c()}).fail(function(){$(".js-geolocazion-zip-error").removeClass("hidden"),$(".js-geolocazion-zip-findzip").addClass("hidden")}))}),$(".js-geolocation-zip-input").on("keyup",function(o){$(".js-geolocazion-zip-error").addClass("hidden"),$(".js-geolocazion-zip-findzip").removeClass("hidden"),"Enter"!==o.key&&13!==o.keyCode||$(".js-geolocation-zip-ok").click()}),$(".js-geolocation-change-zip").on("click",function(o){var a;"productDetails"==$("body").attr("data-page-uid")?(a=getCookie("search_geo"))&&("true"===a?($("#modal-geolocation-header").modal("hide"),$("#modal-geolocation-pdp-alert").modal(),$(".js-geolocation-pdp-alert-text").html('<span class="c-01">Você está </span><span class="c-08">alterando</span><span class="c-01"> seu </span><span class="c-08">CEP</span><span class="c-01"> ou </span><span class="c-08">Localização</span><span class="c-01">. Esta ação habilitará o filtro de "</span><span class="c-08">Ofertas próximas à você</span><span class="c-01">”.</span>'),$(".js-geolocation-pdp-alert-action").attr("data-action","update-zip-geolocation")):n()):n()}),$(".js-geolocation-open-main-modal").on("click",function(o){var a;"productDetails"==$("body").attr("data-page-uid")&&((a=getCookie("search_geo"))&&"true"===a?$("#modal-geolocation-header").modal():($("#modal-geolocation-pdp-alert").modal(),$(".js-geolocation-pdp-alert-text").html('<span class="c-01">Você está </span><span class="c-08">informando</span><span class="c-01"> seu </span><span class="c-08">CEP</span><span class="c-01"> ou </span><span class="c-08">Localização</span><span class="c-01">. Esta ação habilitará o filtro de "</span><span class="c-08">Ofertas próximas à você</span><span class="c-01">”.</span>'),$(".js-geolocation-pdp-alert-action").attr("data-action","open-main-modal")))}),$(".js-geolocation-pdp-alert-action").on("click",function(o){var a=$(".js-geolocation-pdp-alert-action").attr("data-action");"open-main-modal"==a&&$("#modal-geolocation-header").modal(),"remove-geolocation"==a&&s(),"update-geolocation"==a&&t(),"update-zip-geolocation"==a&&$("#modal-geolocation-zip").modal(),$("#modal-geolocation-pdp-alert").modal("hide"),$(".js-geolocation-pdp-alert-text").html(""),$(".js-geolocation-pdp-alert-action").attr("data-action","")})});