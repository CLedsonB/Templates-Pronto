!function(t,e){"use strict";function c(t){e(this).val(t),e(this).trigger("quantity-component:update-value")}function n(){var t=e(this).parent(".w-tooltip-qtd").addClass("w-tooltip"),n=(t.find(".about-qtde").addClass("hidden"),t.find(".quantity-component--input"));n.val()==n.attr("max")?t.find(".about-stock").removeClass("hidden").find(".maxStock").html(n.attr("max")):t.find(".about-stock").addClass("hidden")}function a(){"cartPage"===e("body").attr("data-page-uid")&&e("#CEP").val()&&e("#sendFrete").click()}function i(){var t=e(this).attr("max");t&&e(this).attr("maxlength",t.length)}t.component("component:input--quantity",{active:!0,init:function(){var t=this;e(document).ready(function(){t.listeners().triggers(),i.call(e(".quantity--component").find(".quantity-component--input")),recalcMatchHeight("quantity--component"),t.checkButtons(),e(document).on("submit",".cart--update-product-quantity-form",function(t){var n=e(this),t=(t.preventDefault(),Marisa.components["page:tools"].loaderMaster(!0),n.attr("method")),a=n.attr("action"),n=n.serialize();e.ajax({url:a,type:t,dataType:"json",data:n}).done(function(t){var n=e(".cart-component--cart-item");t.products.length!=n.length?location.reload():(e("#subTotal").html(t.subTotal),e("#totalDiscounts").html(t.totalDiscounts),e("#deliveryCost").html(t.deliveryCost),e("#totalOrder").html(t.totalOrder),e("#echangeVoucherTotal").html(t.exchangeVouchersValue),e(t.products).each(function(t,n){e('.cart-component--cart-item[data-entry-number="'+t+'"][data-sku="'+n.sku+'"] .cart--discount .value').html(n.discountPrice),e('.cart-component--cart-item[data-entry-number="'+t+'"][data-sku="'+n.sku+'"] .subTotalPerProduct').text(n.subTotalPerProduct),e('.cart-component--cart-item[data-entry-number="'+t+'"][data-sku="'+n.sku+'"] .economyPerProduct').text(n.economyPerProduct)}),t.isAppliedCoupon&&e(".cart--remove-voucher").click(),Marisa.components["page:tools"].asyncHeaderWhippet("cart",e(document).find(".js-load-mini-cart-menu")))}).fail(function(t){location.reload()}).always(function(){Marisa.components["page:tools"].loaderMaster(!1)})})})},listeners:function(){return e(".quantity-component--plus").on("quantity-component:plus",function(){!function(){var t=e(this).siblings(".quantity-component--input-wrapper").find(":input"),n=parseInt(t.val())+1,a=t.attr("max");return(!a||n<=a)&&c.apply(t,[n])}.call(this),n.call(this),setTimeout(function(){a.call(this)},300)}),e(".quantity-component--minus").on("quantity-component:minus",function(){!function(){var t=e(this).siblings(".quantity-component--input-wrapper").find(":input"),n=t.val()<t.attr("min")?t.attr("min"):parseInt(t.val())-1;return(t.attr("min")?t.attr("min"):0)<=n&&c.apply(t,[n])}.call(this),n.call(this),setTimeout(function(){a.call(this)},300)}),e(".quantity--component").on("quantity-component:change",function(){!function(){var t=parseInt(e(this).val().trim()),n=parseInt(e(this).attr("max")),a=parseInt(e(this).attr("min")),i=e(this).data("fix-max-value"),o=e(this).data("fix-min-value");n<t&&i&&(log("1"),c.apply(this,[n]),e(this).trigger("quantity-component--fix-max-value")),(t<a&&o||!t)&&(c.apply(this,[a]),e(this).trigger("quantity-component--fix-min-value")),t<=n&&a<=t&&c.apply(this,[t]),e(this).trigger("component:quantity--focus-out"),Marisa.components["component:input--quantity"].checkButtons()}.call(e(this).find(".quantity-component--input")),n.call(this),setTimeout(function(){a.call(this)},300)}),this},triggers:function(){return e(document).on("click",".quantity-component--plus",function(t){t.preventDefault(),e(this).trigger("quantity-component:plus"),Marisa.components["component:input--quantity"].checkButtons()}),e(document).on("click",".quantity-component--minus",function(t){t.preventDefault(),e(this).trigger("quantity-component:minus"),Marisa.components["component:input--quantity"].checkButtons()}),e(document).on("change",".quantity-component--input",function(){e(this).trigger("quantity-component:change")}),this},checkButtons:function(){e(".quantity--component").each(function(t,n){var a=e(n).find(".quantity-component--plus"),i=e(n).find(".quantity-component--minus"),n=e(n).find(".quantity-component--input-wrapper input");i.removeAttr("disabled"),a.removeAttr("disabled"),n.attr("min")==n.val()&&i.attr("disabled","disabled"),n.attr("max")==n.val()&&a.attr("disabled","disabled")})},reloadComponent:function(){this.listeners(),i.call(e(".quantity--component").find(".quantity-component--input")),recalcMatchHeight("quantity--component")}})}(Marisa,jQuery);