ACC.autocomplete={_autoload:["bindSearchAutocomplete"],bindSearchAutocomplete:function(){$.widget("custom.yautocomplete",$.ui.autocomplete,{_create:function(){var e=this.element.data("options");this._setOptions({minLength:e.minCharactersBeforeRequest,displayProductImages:e.displayProductImages,delay:e.waitTimeBeforeRequest,autocompleteUrl:e.autocompleteUrl,source:this.source}),$.ui.autocomplete.prototype._create.call(this)},options:{cache:{},focus:function(){return!1},select:function(e,t){window.location.href=t.item.url}},_renderItem:function(e,t){var a,o;return"autoSuggestion"==t.type?(a="<a href='"+t.url+"' ><div class='name'>"+t.value+"</div></a>",$("<li>").data("item.autocomplete",t).append(a).appendTo(e)):"productResult"==t.type?(a="<a href='"+t.url+"' >",null!=t.image&&(a+="<div class='thumb'><img src='"+t.image+"'  /></div>"),a=(a+="<div class='name'>"+t.value+"</div>")+"<div class='price'>"+t.price+"</div></a>",e.find("li").length&&0==e.find("#tagMarisa").length&&(o=e.html(),e.html('<li id="tagMarisa"> PRODUTOS SUGERIDOS </li>'),e.append(o)),$("<li>").data("item.autocomplete",t).append(a).appendTo(e)):void 0},source:function(e,t){var o=this,i=e.term.toLowerCase();if(i in o.options.cache)return t(o.options.cache[i]);$.getJSON(o.options.autocompleteUrl,{term:e.term},function(e){var a=[];return null!=e.suggestions&&$.each(e.suggestions,function(e,t){a.push({value:t.term,url:ACC.config.encodedContextPath+"/search?text="+t.term,type:"autoSuggestion"})}),null!=e.products&&$.each(e.products,function(e,t){a.push({value:t.name,code:t.code,desc:t.description,manufacturer:t.manufacturer,url:ACC.config.encodedContextPath+t.url,price:t.price.formattedValue,type:"productResult",image:null!=t.images&&o.options.displayProductImages?t.images[0].url:null})}),o.options.cache[i]=a,t(a)})}}),$search=$(".js-site-search-input")}};