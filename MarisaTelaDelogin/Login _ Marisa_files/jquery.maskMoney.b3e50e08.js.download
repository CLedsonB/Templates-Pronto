!function(g){"use strict";g.browser||(g.browser={},g.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),g.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),g.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),g.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()));var t={destroy:function(){return g(this).unbind(".maskMoney"),g.browser.msie&&(this.onpaste=null),this},mask:function(n){return this.each(function(){var e,t=g(this);return"number"==typeof n&&(t.trigger("mask"),e=g(t.val().split(/\D/)).last()[0].length,n=n.toFixed(e),t.val(n)),t.trigger("mask")})},unmasked:function(){return this.map(function(){var n,e=g(this).val()||"0",t=-1!==e.indexOf("-");return g(e.split(/\D/).reverse()).each(function(e,t){if(t)return n=t,!1}),e=(e=e.replace(/\D/g,"")).replace(new RegExp(n+"$"),"."+n),t&&(e="-"+e),parseFloat(e)})},init:function(v){return v=g.extend({prefix:"",suffix:"",affixesStay:!0,thousands:",",decimal:".",precision:2,allowZero:!1,allowNegative:!1},v),this.each(function(){var t,s=g(this);function i(){var e,t,n,a,r=s.get(0),o=0,i=0;return"number"==typeof r.selectionStart&&"number"==typeof r.selectionEnd?(o=r.selectionStart,i=r.selectionEnd):(a=document.selection.createRange())&&a.parentElement()===r&&(n=r.value.length,e=r.value.replace(/\r\n/g,"\n"),(t=r.createTextRange()).moveToBookmark(a.getBookmark()),(a=r.createTextRange()).collapse(!1),-1<t.compareEndPoints("StartToEnd",a)?o=i=n:(o=-t.moveStart("character",-n),o+=e.slice(0,o).split("\n").length-1,-1<t.compareEndPoints("EndToEnd",a)?i=n:(i=-t.moveEnd("character",-n),i+=e.slice(0,i).split("\n").length-1))),{start:o,end:i}}function a(e){var t="";return-1<e.indexOf("-")&&(e=e.replace("-",""),t="-"),t+v.prefix+e+v.suffix}function r(e){var t=-1<e.indexOf("-")&&v.allowNegative?"-":"",e=e.replace(/[^0-9]/g,""),n=e.slice(0,e.length-v.precision),t=t+(n=""===(n=(n=n.replace(/^0*/g,"")).replace(/\B(?=(\d{3})+(?!\d))/g,v.thousands))?"0":n);return 0<v.precision&&(n=e.slice(e.length-v.precision),e=new Array(v.precision+1-n.length).join(0),t+=v.decimal+e+n),a(t)}function l(e){var t,n,a=s.val().length;s.val(r(s.val())),t=s.val().length,n=e-=a-t,s.each(function(e,t){t.setSelectionRange?(t.focus(),t.setSelectionRange(n,n)):t.createTextRange&&((t=t.createTextRange()).collapse(!0),t.moveEnd("character",n),t.moveStart("character",n),t.select())})}function n(){var e=s.val();s.val(r(e))}function c(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function o(e){var t,n,a,r,o=(e=e||window.event).which||e.charCode||e.keyCode;return void 0!==o&&(o<48||57<o?45===o?(s.val((r=s.val(),v.allowNegative?""!==r&&"-"===r.charAt(0)?r.replace("-",""):"-"+r:r)),!1):43===o?(s.val(s.val().replace("-","")),!1):(13===o||9===o||g.browser.mozilla&&(37===o||39===o)&&0===e.charCode||c(e),!0):(r=!(s.val().length>=s.attr("maxlength")&&0<=s.attr("maxlength")),t=(a=i()).start,n=a.end,a=!(a.start===a.end||!s.val().substring(t,n).match(/\d/)),t="0"===s.val().substring(0,1),(r||a||t)&&(c(e),n=String.fromCharCode(o),t=(a=i()).start,e=a.end,o=s.val(),s.val(o.substring(0,t)+n+o.substring(e,o.length)),l(t+1)),!1))}function e(){setTimeout(function(){n()},0)}function u(){return(parseFloat("0")/Math.pow(10,v.precision)).toFixed(v.precision).replace(new RegExp("\\.","g"),v.decimal)}v=g.extend(v,s.data()),s.unbind(".maskMoney"),s.bind("keypress.maskMoney",o),s.bind("keydown.maskMoney",function(e){var t,n,a=(e=e||window.event).which||e.charCode||e.keyCode;return void 0!==a&&(t=(n=i()).start,n=n.end,8!==a&&46!==a&&63272!==a||(c(e),e=s.val(),t===n&&(8===a?""===v.suffix?--t:(a=e.split("").reverse().join("").search(/\d/),n=(t=e.length-a-1)+1):n+=1),s.val(e.substring(0,t)+e.substring(n,e.length)),l(t),!1))}),s.bind("blur.maskMoney",function(e){g.browser.msie&&o(e),""===s.val()||s.val()===a(u())?v.allowZero?v.affixesStay?s.val(a(u())):s.val(u()):s.val(""):v.affixesStay||(e=s.val().replace(v.prefix,"").replace(v.suffix,""),s.val(e)),s.val()!==t&&s.change()}),s.bind("focus.maskMoney",function(){t=s.val(),n();var e=s.get(0);e.createTextRange&&((e=e.createTextRange()).collapse(!1),e.select())}),s.bind("click.maskMoney",function(){var e,t=s.get(0);t.setSelectionRange?(e=s.val().length,t.setSelectionRange(e,e)):s.val(s.val())}),s.bind("cut.maskMoney",e),s.bind("paste.maskMoney",e),s.bind("mask.maskMoney",n)})}};g.fn.maskMoney=function(e){return t[e]?t[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void g.error("Method "+e+" does not exist on jQuery.maskMoney"):t.init.apply(this,arguments)}}(window.jQuery||window.Zepto);